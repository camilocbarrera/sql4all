@tailwind base;
@tailwind components;
@tailwind utilities;

/* View Transition API for circular theme animation */
::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
  mix-blend-mode: normal;
}

::view-transition-old(root) {
  z-index: 1;
}

::view-transition-new(root) {
  z-index: 9999;
}

/* Disable transition for reduced motion */
@media (prefers-reduced-motion: reduce) {
  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation: none !important;
  }
}

@layer base {
  :root {
    --background: oklch(0.9902 0.0039 106.4715);
    --foreground: oklch(0.3043 0.0394 214.0798);
    --card: oklch(0.9992 0.0039 106.4707);
    --card-foreground: oklch(0.1400 0.0200 214.0798);
    --popover: oklch(0.9992 0.0039 106.4707);
    --popover-foreground: oklch(0.1400 0.0200 214.0798);
    --primary: oklch(0.5322 0.0910 205.7465);
    --primary-foreground: oklch(0.9800 0.0100 205.7465);
    --secondary: oklch(0.9004 0.0101 212.5234);
    --secondary-foreground: oklch(0.3043 0.0394 214.0798);
    --muted: oklch(0.9297 0.0066 208.7822);
    --muted-foreground: oklch(0.5292 0.0153 214.4327);
    --accent: oklch(0.9410 0.0159 196.8866);
    --accent-foreground: oklch(0.1400 0.0200 214.0798);
    --destructive: oklch(0.6337 0.1570 54.9611);
    --destructive-foreground: oklch(0.9800 0.0100 54.9611);
    --border: oklch(0.8800 0.0100 214.0798);
    --input: oklch(0.9200 0.0080 214.0798);
    --ring: oklch(0.6312 0.0912 206.5386);
    --chart-1: oklch(0.6267 0.1054 204.7118);
    --chart-2: oklch(0.5443 0.1104 255.9391);
    --chart-3: oklch(0.7877 0.0910 204.4517);
    --chart-4: oklch(0.3858 0.0942 255.9170);
    --chart-5: oklch(0.4406 0.0756 207.3871);
    --sidebar: oklch(0.9628 0.0066 106.5233);
    --sidebar-foreground: oklch(0.1400 0.0200 214.0798);
    --sidebar-primary: oklch(0.5322 0.0910 205.7465);
    --sidebar-primary-foreground: oklch(0.9800 0.0100 205.7465);
    --sidebar-accent: oklch(0.9400 0.0100 196.8866);
    --sidebar-accent-foreground: oklch(0.1400 0.0200 214.0798);
    --sidebar-border: oklch(0.8736 0.0091 214.3465);
    --sidebar-ring: oklch(0.6312 0.0912 206.5386);
    --radius: 0.75rem;
  }

  .dark {
    --background: oklch(0.2167 0.0015 197.0427);
    --foreground: oklch(0.9500 0.0050 197.1231);
    --card: oklch(0.2500 0.0030 197.0427);
    --card-foreground: oklch(0.9500 0.0050 197.1231);
    --popover: oklch(0.2200 0.0020 197.0184);
    --popover-foreground: oklch(0.9500 0.0050 197.1231);
    --primary: oklch(0.7216 0.1120 204.7055);
    --primary-foreground: oklch(0.1500 0.0200 204.7055);
    --secondary: oklch(0.3697 0.0080 196.8121);
    --secondary-foreground: oklch(0.9500 0.0050 197.1231);
    --muted: oklch(0.3123 0.0069 196.8025);
    --muted-foreground: oklch(0.7138 0.0023 197.1059);
    --accent: oklch(0.3500 0.0400 216.5952);
    --accent-foreground: oklch(0.9500 0.0050 197.1231);
    --destructive: oklch(0.7297 0.1130 55.5280);
    --destructive-foreground: oklch(0.1500 0.0200 55.5280);
    --border: oklch(0.3500 0.0080 196.8536);
    --input: oklch(0.3000 0.0050 196.9624);
    --ring: oklch(0.6234 0.1065 205.4181);
    --chart-1: oklch(0.6267 0.1054 204.7118);
    --chart-2: oklch(0.6074 0.0517 245.8473);
    --chart-3: oklch(0.7877 0.0910 204.4517);
    --chart-4: oklch(0.4214 0.0452 246.6475);
    --chart-5: oklch(0.4406 0.0756 207.3871);
    --sidebar: oklch(0.2457 0.0030 196.9624);
    --sidebar-foreground: oklch(0.9500 0.0050 197.1231);
    --sidebar-primary: oklch(0.7216 0.1120 204.7055);
    --sidebar-primary-foreground: oklch(0.1500 0.0200 204.7055);
    --sidebar-accent: oklch(0.2800 0.0050 197.0094);
    --sidebar-accent-foreground: oklch(0.9500 0.0050 197.1231);
    --sidebar-border: oklch(0.3200 0.0050 196.9776);
    --sidebar-ring: oklch(0.6234 0.1065 205.4181);
    --radius: 0.75rem;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-semibold tracking-tight;
  }

  ::selection {
    background-color: oklch(from var(--primary) l c h / 0.5);
    color: oklch(from var(--primary-foreground) l c h);
  }
}

/* GitHub Badge Animations */
@keyframes starGlow {
  0% {
    filter: drop-shadow(0 0 0.5px rgba(251, 191, 36, 0.2))
      drop-shadow(0 0 1px rgba(251, 191, 36, 0.1)) brightness(1);
    transform: scale(1);
  }
  25% {
    filter: drop-shadow(0 0 1px rgba(251, 191, 36, 0.3))
      drop-shadow(0 0 1.5px rgba(251, 191, 36, 0.15)) brightness(1.03);
    transform: scale(1.005);
  }
  50% {
    filter: drop-shadow(0 0 1.5px rgba(251, 191, 36, 0.35))
      drop-shadow(0 0 2px rgba(251, 191, 36, 0.18)) brightness(1.05);
    transform: scale(1.008);
  }
  75% {
    filter: drop-shadow(0 0 1px rgba(251, 191, 36, 0.3))
      drop-shadow(0 0 1.5px rgba(251, 191, 36, 0.15)) brightness(1.03);
    transform: scale(1.005);
  }
  100% {
    filter: drop-shadow(0 0 0.5px rgba(251, 191, 36, 0.2))
      drop-shadow(0 0 1px rgba(251, 191, 36, 0.1)) brightness(1);
    transform: scale(1);
  }
}

@keyframes gradientMove {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

.github-badge:hover .star-icon {
  animation: starGlow 2.5s ease-in-out infinite;
}

.github-badge:hover .star-wrapper::before {
  content: '';
  position: absolute;
  inset: -1.5px;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    transparent 120deg,
    rgba(251, 191, 36, 0.12) 150deg,
    rgba(251, 191, 36, 0.18) 180deg,
    rgba(251, 191, 36, 0.12) 210deg,
    transparent 240deg,
    transparent 360deg
  );
  border-radius: 50%;
  animation: gradientMove 2.5s linear infinite;
  pointer-events: none;
  z-index: -1;
  filter: blur(1px);
}

.github-badge:active {
  transform: scale(0.95);
  transition: transform 0.1s ease;
}

/* Stellar Border Effect */
@property --stellar-angle {
  syntax: "<angle>";
  initial-value: 0deg;
  inherits: false;
}

@keyframes stellar-rotate {
  from { --stellar-angle: 0deg; }
  to { --stellar-angle: 360deg; }
}

.stellar-border {
  position: relative;
  isolation: isolate;
}

.stellar-border::before,
.stellar-border::after {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  pointer-events: none;
}

.stellar-border::before {
  background: oklch(from var(--primary) l c h / 0.15);
  z-index: -2;
}

.stellar-border::after {
  background: conic-gradient(
    from var(--stellar-angle),
    transparent 0%,
    transparent 65%,
    oklch(from var(--primary) l c h / 0.1) 72%,
    oklch(from var(--primary) l c h / 0.25) 78%,
    oklch(from var(--primary) calc(l + 0.1) c h / 0.45) 84%,
    oklch(from var(--primary) calc(l + 0.15) c h / 0.7) 89%,
    oklch(from var(--primary) calc(l + 0.2) c h / 0.9) 93%,
    oklch(from var(--primary) calc(l + 0.25) c h / 1) 96%,
    oklch(from var(--primary) calc(l + 0.2) c h / 0.9) 97%,
    oklch(from var(--primary) calc(l + 0.15) c h / 0.6) 98%,
    oklch(from var(--primary) l c h / 0.25) 99%,
    transparent 100%
  );
  animation: stellar-rotate 4s linear infinite;
  z-index: -1;
  filter: blur(0.5px);
}

.stellar-border:hover::after {
  filter: blur(0.5px) brightness(1.3);
}

.stellar-border > * {
  position: relative;
  z-index: 1;
}

.stellar-border-inner {
  background: oklch(from var(--background) l c h);
  border-radius: inherit;
  position: absolute;
  inset: 1px;
  z-index: 0;
}

/* Clerk Auth Component Theming */
.cl-rootBox {
  font-family: var(--font-sans), Inter, system-ui, sans-serif;
}

.cl-card {
  background: var(--card) !important;
  border: none !important;
  box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25) !important;
}

.cl-headerTitle,
.cl-headerSubtitle,
.cl-socialButtonsBlockButtonText,
.cl-formFieldLabel,
.cl-identityPreviewText,
.cl-userPreviewMainIdentifier {
  color: var(--foreground) !important;
}

.cl-dividerText,
.cl-userPreviewSecondaryIdentifier {
  color: var(--muted-foreground) !important;
}

.cl-dividerLine {
  background: var(--muted) !important;
}

.cl-formFieldInput {
  background: var(--input) !important;
  border: none !important;
  color: var(--foreground) !important;
}

.cl-formFieldInput::placeholder {
  color: var(--muted-foreground) !important;
}

.cl-formFieldInput:focus {
  box-shadow: 0 0 0 2px oklch(from var(--ring) l c h / 0.3) !important;
}

.cl-formButtonPrimary {
  background: var(--primary) !important;
  color: var(--primary-foreground) !important;
  font-weight: 500 !important;
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1) !important;
  transition: all 0.2s ease !important;
}

.cl-formButtonPrimary:hover {
  background: oklch(from var(--primary) calc(l - 0.05) c h) !important;
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.15) !important;
}

.cl-socialButtonsBlockButton {
  background: var(--secondary) !important;
  border: none !important;
  transition: all 0.2s ease !important;
}

.cl-socialButtonsBlockButton:hover {
  background: oklch(from var(--secondary) calc(l - 0.05) c h) !important;
}

.cl-footerActionLink,
.cl-formButtonReset,
.cl-identityPreviewEditButton {
  color: var(--primary) !important;
}

.cl-footerActionLink:hover,
.cl-formButtonReset:hover,
.cl-identityPreviewEditButton:hover {
  color: oklch(from var(--primary) calc(l - 0.1) c h) !important;
}

.cl-userButtonPopoverCard {
  background: var(--card) !important;
  border: none !important;
  box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25) !important;
}

.cl-userButtonPopoverActionButton:hover {
  background: var(--accent) !important;
}

.cl-userButtonPopoverFooter {
  border: none !important;
}

.cl-avatarBox {
  box-shadow: 0 0 0 2px oklch(from var(--primary) l c h / 0.2) !important;
}

.cl-badge {
  background: oklch(from var(--primary) l c h / 0.1) !important;
  color: var(--primary) !important;
  border: none !important;
}

.cl-modalBackdrop {
  background: oklch(from var(--background) l c h / 0.8) !important;
  backdrop-filter: blur(4px) !important;
}

.cl-modalContent {
  background: var(--card) !important;
  border: none !important;
}

/* Custom Scrollbar */
.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: oklch(from var(--muted) l c h / 0.5) transparent;
}

.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background-color: oklch(from var(--muted) l c h / 0.5);
  border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: oklch(from var(--muted) l c h / 0.7);
}

/* Dotted Grid Background */
.dotted-grid {
  position: absolute;
  inset: 0;
  background-image: radial-gradient(circle, currentColor 1px, transparent 1px);
  background-size: 24px 24px;
  background-position: 0 0;
  opacity: 0.15;
  mask-image: linear-gradient(to bottom, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0.5) 50%, rgba(0, 0, 0, 0) 100%);
  -webkit-mask-image: linear-gradient(to bottom, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0.5) 50%, rgba(0, 0, 0, 0) 100%);
  pointer-events: none;
}

.dark .dotted-grid {
  opacity: 0.2;
}

/* Monaco Editor Suggestions Widget - Ensure it appears above other elements */
.monaco-editor .suggest-widget {
  z-index: 10000 !important;
}

.monaco-editor .suggest-widget .monaco-list {
  z-index: 10000 !important;
}

/* Ensure Monaco Editor container doesn't clip suggestions */
.monaco-editor {
  overflow: visible !important;
}

.monaco-editor .overflow-guard {
  overflow: visible !important;
}